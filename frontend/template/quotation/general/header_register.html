{% extends "template/base.html" %}

{% block title %}견적서(갑지) 생성 - SYNEX+{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', path='/css/page/quotation/general/price_compare_register.css') }}">
{% endblock %}

{% block content %}
<div class="page-content">
    <div class="header-section">
        <h2>견적서(갑지) 생성</h2>
        <p class="text-gray-500">
            현재 프로젝트: <strong id="displayGeneralName" style="color: #2563eb;">정보 불러오는 중...</strong><br>
            요약할 <strong>상세 견적서(을지)</strong>를 하나 선택해주세요.
        </p>
    </div>

    <input type="hidden" id="hiddenGeneralId" value="{{ general_id }}">

    <div class="action-bar">
        <div class="action-bar-left">
            <button class="btn btn-secondary" onclick="history.back()">&lt; 뒤로가기</button>
            <button class="btn btn-primary" onclick="openCreateModal()" id="createBtn" disabled>을지 선택 완료 - 정보 입력</button>
        </div>
    </div>

    <div id="loading" style="display: none; text-align: center; padding: 40px;"><p>데이터를 불러오는 중...</p></div>
    <div id="tableContainer"></div>
</div>

<div id="createModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>갑지 생성 정보 입력</h3>
            <button class="close-btn" onclick="closeCreateModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>갑지 제목 <span class="required">*</span></label>
                <input type="text" id="regTitle" class="form-input" placeholder="예: [갑지] 프로젝트 견적서">
            </div>
            <div class="form-group">
                <label>고객사명 <span class="required">*</span></label>
                <input type="text" id="regClient" class="form-input">
            </div>
            <div class="form-group">
                <div style="display: flex; gap: 10px;">
                    <div style="flex: 1;">
                        <label>담당자 성함 <span class="required">*</span></label>
                        <input type="text" id="regPicName" class="form-input">
                    </div>
                    <div style="flex: 1;">
                        <label>담당자 직급 <span class="required">*</span></label>
                        <input type="text" id="regPicPosition" class="form-input">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>작성자 <span class="required">*</span></label>
                <input type="text" id="regCreator" class="form-input">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeCreateModal()">취소</button>
            <button class="btn btn-primary" onclick="submitHeader()">갑지 생성 완료</button>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <script src="{{ url_for('static', path='/js/page/quotation/general/header_register.js') }}"></script>
{% endblock %}