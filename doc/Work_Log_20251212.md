# 작업 일지 (2025-12-12)

## 1. 개요
본 문서는 금일 진행된 '장비 견적서 시스템(SYNEX+ Quotation)'의 UI/UX 개선 및 기능 고도화 작업 내용을 정리한 것입니다.

---

## 2. 작업 상세 내용

### 2.1 UI/UX 개선 (`machine_create.html`)
*   **플로팅 액션 버튼 (FAB) 추가:**
    *   우측 중앙에 고정된 버튼 2종 추가.
    *   💾 **임시 저장:** 클릭 시 페이지 이동 없이 현재 상태 저장 (자동 저장 상태 표시).
    *   🚀 **등록 완료:** 최종 제출 및 완료 처리 (초록색 강조).
*   **부품 빠른 등록 (Quick Add):**
    *   부품 목록(테이블)의 '모델명' 컬럼에 마우스를 올리면 `+` 버튼 표시.
    *   클릭 시 해당 부품의 정보를 복사하여 **부품 등록 팝업** 호출 (유사 부품 빠른 등록).
*   **기존 장비 불러오기 버튼:**
    *   '장비명' 입력 필드 우측 상단에 배치.
    *   레이아웃 최적화 (`align-items: flex-end` 적용)로 라벨과 입력칸 간격 조정.

### 2.2 기능 구현 (Frontend Logic)
*   **자동 저장 (Auto-save):**
    *   최초 입력 시작 후 **60초 주기**로 변경 사항(`isDirty`) 감지.
    *   변경 시 백그라운드에서 조용히 저장(`Silent Mode`)하고 상단에 "마지막 저장 시간" 표시.
*   **임시 저장 (`saveDraft`):**
    *   신규 작성 중 저장 시, 페이지 리로딩 없이 URL을 수정 모드(`?mode=edit`)로 변경하여 작업 연속성 보장.
*   **부품 등록 팝업 고도화:**
    *   **데이터 자동 채움:** 목록에서 `+` 클릭 시 선택한 부품의 제조사, 대분류, 가격 등을 팝업에 프리필(Pre-fill).
    *   **화면 갱신:** 등록 완료 시 전체 페이지 새로고침 없이 **부품 목록만 비동기(Ajax) 갱신**.
    *   **신규 항목 강조:** 새로 추가된 부품 행(Row)에 노란색 페이드아웃 애니메이션 적용.
    *   **입력 편의성:** 제조사 목록 공백 제거, 대분류 '기타' 선택 시 수동 입력창 활성화.

### 2.3 버그 수정 및 안정화
*   **부품 데이터 매핑 오류:** 중복될 수 있는 단축 ID 대신 고유한 `item_code`를 사용하여 엉뚱한 부품 정보가 불러와지는 문제 해결.
*   **목록 정렬 문제:** 부품 추가 시 정렬 기준이 모호하여 위치를 찾기 어려운 문제를 해결하기 위해 기본 정렬(모델명 오름차순) 적용.
*   **커서 스타일:** 팝업 내 입력 필드에서 '금지(not-allowed)' 커서가 뜨는 문제를 CSS 강제 적용(`!important`)으로 해결.

---

## 3. 향후 계획 (Next Step)

### 3.1 DB 스키마 변경 및 순서 저장 (High Priority)
*   **현황:** 현재 부품 순서가 DB에 저장되지 않아 조회 시마다 정렬이 초기화됨.
*   **계획:**
    1.  `machine_resources` 테이블에 `order_index` 컬럼 추가.
    2.  저장 시 화면의 순서대로 인덱스 부여.
    3.  조회 시 `order_index` 기준으로 정렬하여 사용자 지정 순서 유지.
    *   *상세 계획:* `PLAN_ORDER_INDEX_MIGRATION.md` 참조.

### 3.2 기존 장비 불러오기 기능 구현
*   **현황:** 버튼만 생성되어 있고 기능은 미구현 (빈 팝업).
*   **계획:**
    1.  장비 검색 모달 구현 (검색어 자동완성 등).
    2.  선택한 장비의 부품 리스트를 현재 화면에 덮어씌우는(Deep Copy) 로직 구현.

---

## 4. 파일 변경 목록
*   `Server/app/frontend/template/machine_create.html` (UI 및 JS 로직 대거 수정)
*   `Server/app/frontend/template/parts_list_direct.html` (참조용 로직 확인)
*   `PLAN_ORDER_INDEX_MIGRATION.md` (신규 생성)
