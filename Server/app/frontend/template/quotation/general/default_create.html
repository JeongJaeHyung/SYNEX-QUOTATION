<!--default_create.html-->

{% extends "template/base.html" %}

{% block title %}견적서(일반) - SYNEX+{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', path='/css/page/quotation/general/default_create.css') }}">
{% endblock %}

{% block extra_js %}
    <script src="{{ url_for('static', path='/js/page/quotation/general/default_create.js') }}"></script>
{% endblock %}

{% block content %}
<div class="page-content">
    {# 상단 정보 입력 #}
    <div class="create-header">
        <h2 id="pageTitle">견적서(일반) 생성</h2>
        <div class="header-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="generalName">견적서명 <span class="required">*</span></label>
                    <input type="text" id="generalName" class="form-input" placeholder="견적서명을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label for="client">고객사</label>
                    <input type="text" id="client" class="form-input" placeholder="고객사를 입력하세요">
                </div>
                <div class="form-group">
                    <label for="creator">작성자 <span class="required">*</span></label>
                    <input type="text" id="creator" class="form-input" placeholder="작성자명을 입력하세요" required>
                </div>
                <div class="form-group">
                    <label for="description">비고</label>
                    <input type="text" id="description" class="form-input" placeholder="비고를 입력하세요">
                </div>
            </div>
            <div class="form-row" id="viewOnlyFields" style="display: none;">
                <div class="form-group">
                    <label for="createdAt">생성일</label>
                    <input type="text" id="createdAt" class="form-input" value="-" readonly>
                </div>
                <div class="form-group">
                    <label for="updatedAt">수정일</label>
                    <input type="text" id="updatedAt" class="form-input" value="-" readonly>
                </div>
            </div>
        </div>
    </div>

    {# 연관 테이블 섹션 (View 모드에서만 표시) #}
    <div id="relationsSection" style="display: none;">
        <hr class="divider">
        <div class="section-header">
            <h3>연관 견적서 목록</h3>
            <p class="section-description">이 견적서(일반)에 연결된 견적서(부품), 견적서(상세), 견적서(비교) 목록</p>
        </div>

        {# 로딩 인디케이터 #}
        <div id="relationsLoading" style="display: none; text-align: center; padding: 20px;">
            <p>연관 데이터를 불러오는 중...</p>
        </div>

        {# 연관 테이블 #}
        <div id="relationsTableContainer"></div>
    </div>

    {# 액션 푸터 (버튼 영역) #}
    <div class="action-footer">
        <div id="derivativeBtnGroup" class="derivative-group" style="display: none;">
            <button class="btn btn-secondary" onclick="alert('견적서(갑지) 기능 준비 중')">📄 갑지 만들기</button>
            <button class="btn btn-secondary" onclick="alert('견적서(을지) 기능 준비 중')">📑 을지 만들기</button>
            <button class="btn btn-primary" onclick="createPriceCompare()">💰 내정가 견적비교서 만들기</button>
        </div>

        <div class="right-group">
            <button class="btn btn-secondary btn-lg" onclick="goToList()">목록으로</button>
            <button class="btn btn-success btn-lg" onclick="submitGeneral()" id="submitBtn">등록완료</button>
        </div>
    </div>
</div>
{% endblock %}